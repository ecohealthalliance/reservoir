# Define the user we should use when spawning R Shiny processes
run_as :HOME_USER: shiny;

# Define a top-level server which will listen on a port
server {
  # Instruct this server to listen on port 3838
  listen 3838;

  location / {
    site_dir /home/ShinyApps/
    run_as shiny;
    directory_index off;
  }
  # Define the location available at the base URL
  location /user/ {
    user_dirs;
    run_as :HOME_USER:;
    directory_index on;
  }
}